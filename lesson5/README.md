# lesson5作业

在第四课作业设计的共识的基础上，加上正祥助教的指点，我对共识算法和治理机制做了一定的修改。

1. 由于需要验证节点的币量和币龄，可能造成验证的时间过长，使得整条链的效率低下。所以需要先形成一个组，在每个组的范围内进行区块生成和验证。

   组的生成可以根据账号的结尾数字分成相应的组数，每次打包只接受相应规则的账号的打包。例如根据账号的十六进制的尾数表示，从0到F是十六组，第“…0”区块只接受尾号为0的账号打包的交易，第“…F”区块只接受尾号为F的账号打包的交易。

2. 可以让持币者给节点投票，相当于把自己的币量和币龄借给节点，节点如果获取区块奖励，得到的token也要分配一部分给支持者。这样可以提高小额代币持有者的投票热情和参与度。

3. 治理方式为链上治理，用户可以投票给他想投的节点，也可以更换。只不过有一个锁定的时间为16个区块的时间，是所有的组轮换一圈的时间。

账号的设计上应该是账户体系，需要在余额变动和打包过区块并获取区块奖励后修改对应的币龄。账户题中需要添加投票的账户地址。

---

# lesson4作业

### 币量乘以在线时间的平方共识算法（未实现）

POS共识算法中，是以用户的代币的数量作为排序的主要依据。

吴为龙老师的课中所说的类似POS的共识算法中如何设计排序为最主要的，所以在我构想的这个POX的共识算法中（暂且称为POSD），将时间和代币作为排序的共同影响因素。

我打算将某个账户持有代币的天数（Day）的平方作为类POS公式算法中的一个排序因素，另一个排序的因素就是代币的数量（Stake）。

账户中持有的各个不同的时间点产生或者转入的代币的数量，乘以这笔的生成或者转入的天数的平方，然后加和，得到这个账户的SD值。在类POS中，时间是不准的，可以通过区块高度的差值得出近似的币龄的天数。

当排到某个账户的时候，这个账户在规定的时间内必须要在线并出块。

- 出块以后，这个账户中的所有的币的币龄清零，重新开始累计币龄，计算SD值。
- 如果这个账户在规定的时间内没有出块，则币龄依然清零，以作为该账户没有为网络做出贡献的惩罚。

通过这个方法，可以让更多的账户在线，为网络提供安全和服务。

如果能通过某种方法计算出某个账户的在线天数，则用在线天数的平方乘以币值，计算SD的方法可能更加有效。

以上是我设计的POX共识算法中的POSD算法，可能有不妥之处，欢迎指教。